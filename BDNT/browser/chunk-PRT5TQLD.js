import"./chunk-IPN3N7O4.js";import{a as X}from"./chunk-FDUO4XW2.js";import{a as M,b as Y}from"./chunk-CQF3O75Q.js";import{F as W,G as z,ma as V,na as $}from"./chunk-3G7OGPR6.js";import{e as Z,h as K,v as Q}from"./chunk-HQDSJWD4.js";import{a as J}from"./chunk-TDN6OWID.js";import{Da as v,E as C,Ia as _,Ib as N,J as R,Kb as B,Mb as A,N as y,Ob as L,P as q,Sa as t,Sb as U,Ta as e,Wb as G,Xb as H,aa as j,bb as D,mb as o,n as k,na as c,nb as h,oa as I,ra as T,vb as F,wb as x,xa as w}from"./chunk-GEO6TNI5.js";import{a as E,g as f,h as g,i as b}from"./chunk-TMEVGU2Q.js";var tt=(()=>{let r=class r{constructor(){this.mainChart={type:"line"},this.initMainChart()}random(a,m){return Math.floor(Math.random()*(m-a+1)+a)}initMainChart(a="Month",m=[]){let u=M("--cui-info")??"#20a8d8",p=Y(u,10),n=[{data:m.length?m:Array(12).fill(0).map(()=>this.random(10,30)),label:"Dataset",backgroundColor:p,borderColor:u,pointHoverBackgroundColor:u,borderWidth:2,fill:!0}],s=["1","2","3","4","5","6","7","8","9","10","11","12"],i=this.getScales();return{type:"line",data:{labels:s,datasets:n},options:{maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{labelColor:et=>({backgroundColor:et.dataset.borderColor})}}},scales:i,elements:{line:{tension:.4},point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}}}}}getScales(){let a=M("--cui-border-color-translucent"),m=M("--cui-body-color");return{x:{grid:{color:a,drawOnChartArea:!1},ticks:{color:m}},y:{border:{color:a},grid:{color:a},beginAtZero:!0,ticks:{color:m,callback:p=>p.toString()}}}}};r.\u0275fac=function(m){return new(m||r)},r.\u0275prov=R({token:r,factory:r.\u0275fac,providedIn:"any"});let l=r;return l})();var S=()=>({"marginTop.px":40});function ot(l,r){if(l&1&&(t(0,"tr")(1,"td"),o(2),e(),t(3,"td"),o(4),e(),t(5,"td"),o(6),e(),t(7,"td"),o(8),e()()),l&2){let d=r.index,a=D();c(2),h(d+1),c(2),h(a.monthlyRequests.approved_requests[d]),c(2),h(a.monthlyRequests.rejected_requests[d]),c(2),h(a.monthlyRequests.total_requests[d])}}function it(l,r){if(l&1&&(t(0,"tr")(1,"td"),o(2),e(),t(3,"td"),o(4),e(),t(5,"td"),o(6),e()()),l&2){let d=r.$implicit,a=r.index;c(2),h(a+1),c(2),h(d.province),c(2),h(d.error_count)}}function rt(l,r){if(l&1&&(t(0,"tr")(1,"td"),o(2),e(),t(3,"td"),o(4),e(),t(5,"td"),o(6),e()()),l&2){let d=r.$implicit,a=r.index;c(2),h(a+1),c(2),h(d.object),c(2),h(d.count)}}function at(l,r){if(l&1&&(t(0,"tr")(1,"td"),o(2),e(),t(3,"td"),o(4),e(),t(5,"td"),o(6),e()()),l&2){let d=r.$implicit,a=r.index;c(2),h(a+1),c(2),h(d.name),c(2),h(d.error_count)}}var Lt=(()=>{var r,d,a,m,u;let p=class p{constructor(n){g(this,r);g(this,d);g(this,a);g(this,m);g(this,u);this.http=n,b(this,r,y(j)),b(this,d,y(B)),b(this,a,y(T)),b(this,m,y(tt)),this.mainChart={type:"line"},this.mainChartRef=w(void 0),b(this,u,N(()=>{this.mainChartRef()&&this.setChartStyles()})),this.n=0,this.tasks_monthly_rq=[],this.tasks_top10_prov=[],this.tasks_num_station=[],this.tasks_top10_oj=[],this.tasks_top10_task=[],this.APIURL=`${J.server}/`,this.chart=[],this.trafficRadioGroup=new Z({trafficRadio:new K("Month")}),this.monthlyRequests={rejected_requests:[0,0,0,0,0,0,0,0,0,0,0,0],approved_requests:[0,0,0,0,0,0,0,0,0,0,0,0],total_requests:[0,0,0,0,0,0,0,0,0,0,0,0],num_station:[0,0,0,0,0,0,0,0,0,0,0,0]},this.top10ProvincesErrors=[{province:"",error_count:0}],this.top10Objects=[{object:"",count:0}],this.top10Tasks=[{name:"",error_count:0}]}monthly_rq(){return this.http.get(this.APIURL+"num_rq_per_month").pipe(C(n=>{this.tasks_monthly_rq=n.data,this.updateMonthlyRequests()}))}top_10_provinces_error(){return this.http.get(this.APIURL+"top_10_provinces_errors").pipe(C(n=>{this.tasks_top10_prov=n.data,this.updatetop10ProvincesErrors()}))}top_10_oj(){return this.http.get(this.APIURL+"top_10_object_station_errors").pipe(C(n=>{this.tasks_top10_oj=n.data,this.updatetop10Objects()}))}top_10_task(){return this.http.get(this.APIURL+"top_10_task_errors").pipe(C(n=>{this.tasks_top10_task=n.data,this.updatetop10Tasks()}))}num_station_monitor(){return this.http.get(this.APIURL+"num_station_monitor").pipe(C(n=>{this.tasks_num_station=n.data,this.update_num_station_monitor()}))}updateMonthlyRequests(){this.tasks_monthly_rq.forEach(n=>{let{request_month:s,passed_requests:i,failed_requests:O,total_requests:P}=n;this.monthlyRequests.rejected_requests[s-1]=O,this.monthlyRequests.approved_requests[s-1]=i,this.monthlyRequests.total_requests[s-1]=P})}update_num_station_monitor(){this.tasks_num_station.forEach(n=>{let{MONTH_ID:s,Num_station:i}=n;this.monthlyRequests.num_station[s-1]=i})}updatetop10ProvincesErrors(){this.n=0,this.top10ProvincesErrors=[],this.tasks_top10_prov.forEach(n=>{let{station_code:s,Num_Error:i}=n;this.n<10&&i>0&&(this.top10ProvincesErrors.push({province:s,error_count:i}),this.n+=1)})}updatetop10Objects(){this.n=0,this.top10Objects=[],this.tasks_top10_oj.forEach(n=>{let{object_station_name:s,Num_Pass:i}=n;this.n<10&&i>0&&(this.top10Objects.push({object:s,count:i}),this.n+=1)})}updatetop10Tasks(){this.n=0,this.top10Tasks=[],this.tasks_top10_task.forEach(n=>{let{task_code:s,Num_error:i}=n;this.n<10&&i>0&&(this.top10Tasks.push({name:s,error_count:i}),this.n+=1)})}ngOnInit(){k([this.monthly_rq(),this.top_10_provinces_error(),this.top_10_oj(),this.top_10_task(),this.num_station_monitor()]).subscribe(()=>{this.initCharts()})}initCharts(){let n=[];n[0]=this.monthlyRequests.total_requests,n[1]=this.monthlyRequests.num_station,n[2]=this.monthlyRequests.approved_requests,n[3]=this.monthlyRequests.rejected_requests,this.chart=n.map(s=>f(this,m).initMainChart("Month",s))}setTrafficPeriod(n){this.trafficRadioGroup.setValue({trafficRadio:n}),f(this,m).initMainChart(n),this.initCharts()}handleChartRef(n){n&&this.mainChartRef.set(n)}updateChartOnColorModeChange(){let n=f(this,a).listen(f(this,d).documentElement,"ColorSchemeChange",()=>{this.setChartStyles()});f(this,r).onDestroy(()=>{n()})}setChartStyles(){this.mainChartRef()&&setTimeout(()=>{let n=E({},this.mainChart.options),s=f(this,m).getScales();this.mainChartRef().options.scales=E(E({},n.scales),s),this.mainChartRef().update()})}};r=new WeakMap,d=new WeakMap,a=new WeakMap,m=new WeakMap,u=new WeakMap,p.\u0275fac=function(s){return new(s||p)(I(G))},p.\u0275cmp=q({type:p,selectors:[["ng-component"]],standalone:!0,features:[F],decls:109,vars:28,consts:[[1,"title-container","text-center","mb-4"],[1,"title-text"],[1,"mt-4"],["xs","12","md","6","xl","6"],[1,"mb-4"],["sm","12"],["id","visitsChart1",1,"card-title","mb-0","text-center"],[3,"data","height","ngStyle","options","type"],["id","visitsChart2",1,"card-title","mb-0","text-center"],["id","visitsChart3",1,"card-title","mb-0","text-center"],["id","visitsChart4",1,"card-title","mb-0","text-center"],[1,"card-title","mb-4","text-center"],[1,"table","table-striped","table-bordered","text-center"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(s,i){s&1&&(t(0,"div",0)(1,"h1",1),o(2,"OVERVIEW"),e()(),t(3,"c-row",2)(4,"c-col",3)(5,"c-card",4)(6,"c-card-body")(7,"c-row")(8,"c-col",5)(9,"h4",6),o(10,"Number of Monitoring Requests"),e()()(),t(11,"c-chart",7),o(12," Bar chart for visits 1 "),e()()()(),t(13,"c-col",3)(14,"c-card",4)(15,"c-card-body")(16,"c-row")(17,"c-col",5)(18,"h4",8),o(19,"Number of Monitoring Stations"),e()()(),t(20,"c-chart",7),o(21," Bar chart for visits 2 "),e()()()()(),t(22,"c-row",2)(23,"c-col",3)(24,"c-card",4)(25,"c-card-body")(26,"c-row")(27,"c-col",5)(28,"h4",9),o(29,"Requests Over Time"),e()()(),t(30,"c-chart",7),o(31," Bar chart for visits 3 "),e()()()(),t(32,"c-col",3)(33,"c-card",4)(34,"c-card-body")(35,"c-row")(36,"c-col",5)(37,"h4",10),o(38,"Number of Error Requests"),e()()(),t(39,"c-chart",7),o(40," Bar chart for visits 4 "),e()()()()(),t(41,"c-row")(42,"c-col",3)(43,"c-card",4)(44,"c-card-body")(45,"h4",11),o(46,"Monthly Requests"),e(),t(47,"table",12)(48,"thead",13)(49,"tr")(50,"th",14),o(51,"Month"),e(),t(52,"th",14),o(53,"Number of Approved Requests"),e(),t(54,"th",14),o(55,"Number of Error Requests"),e(),t(56,"th",14),o(57,"Total Requests"),e()()(),t(58,"tbody"),v(59,ot,9,4,"tr",15),e()()()()(),t(60,"c-col",3)(61,"c-card",4)(62,"c-card-body")(63,"h4",11),o(64,"Top 10 Provinces with Most Errors"),e(),t(65,"table",12)(66,"thead",13)(67,"tr")(68,"th",14),o(69,"Rank"),e(),t(70,"th",14),o(71,"Station Code"),e(),t(72,"th",14),o(73,"Number of Error Requests"),e()()(),t(74,"tbody"),v(75,it,7,3,"tr",15),e()()()()()(),t(76,"c-row",2)(77,"c-col",3)(78,"c-card",4)(79,"c-card-body")(80,"h4",11),o(81,"Top 10 Objects with Errors"),e(),t(82,"table",12)(83,"thead",13)(84,"tr")(85,"th",14),o(86,"Rank"),e(),t(87,"th",14),o(88,"Object Station Name"),e(),t(89,"th",14),o(90,"Count"),e()()(),t(91,"tbody"),v(92,rt,7,3,"tr",15),e()()()()(),t(93,"c-col",3)(94,"c-card",4)(95,"c-card-body")(96,"h4",11),o(97,"Top 10 Tasks with Most Errors"),e(),t(98,"table",12)(99,"thead",13)(100,"tr")(101,"th",14),o(102,"Rank"),e(),t(103,"th",14),o(104,"Task"),e(),t(105,"th",14),o(106,"Number of Error Requests"),e()()(),t(107,"tbody"),v(108,at,7,3,"tr",15),e()()()()()()),s&2&&(c(11),_("data",i.chart[0].data)("height",300)("ngStyle",x(24,S))("options",i.chart[0].options)("type","bar"),c(9),_("data",i.chart[1].data)("height",300)("ngStyle",x(25,S))("options",i.chart[1].options)("type","bar"),c(10),_("data",i.chart[2].data)("height",300)("ngStyle",x(26,S))("options",i.chart[2].options)("type","bar"),c(9),_("data",i.chart[3].data)("height",300)("ngStyle",x(27,S))("options",i.chart[3].options)("type","bar"),c(20),_("ngForOf",i.monthlyRequests.rejected_requests),c(16),_("ngForOf",i.top10ProvincesErrors),c(17),_("ngForOf",i.top10Objects),c(16),_("ngForOf",i.top10Tasks))},dependencies:[U,A,L,W,z,$,V,Q,X,H],styles:['[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:x-small}.title-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.title-text[_ngcontent-%COMP%]{font-size:2rem;text-align:center;font-weight:700;color:#333}.table[_ngcontent-%COMP%]{width:100%;margin-top:1.5rem;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;text-align:center;border:1px solid #ddd;vertical-align:middle}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f8f9fc}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px;cursor:pointer}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f9f9f9}.table-bordered[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #dee2e6}.card-title[_ngcontent-%COMP%]{font-size:1.25rem}.title-container[_ngcontent-%COMP%]{margin-bottom:1rem}.text-center[_ngcontent-%COMP%]{text-align:center}.body[_ngcontent-%COMP%]{background-image:url("./media/backgound-4L2O7T34.png");background-size:cover;background-position:center;background-repeat:no-repeat}']});let l=p;return l})();export{Lt as DashboardComponent};
