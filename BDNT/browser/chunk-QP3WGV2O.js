import{a as et,b as C,c as at}from"./chunk-JR7XJC2U.js";import{a as it}from"./chunk-HEC4VNOU.js";import"./chunk-WHCKJPEQ.js";import{$ as U,F as N,G as q,I as X,ca as $,ma as V,na as G,t as B}from"./chunk-3G7OGPR6.js";import{d as J,g as Q,k as K,q as W,r as Y,u as Z,v as tt}from"./chunk-HQDSJWD4.js";import{a as z}from"./chunk-TDN6OWID.js";import{$a as y,Da as h,E as f,Ia as g,Mb as D,Nb as H,P as O,Sa as i,Sb as j,Ta as t,Ua as S,W as I,Wb as w,X as k,Xb as A,Ya as P,bb as x,dc as R,mb as o,n as T,na as s,nb as p,oa as E,vb as F}from"./chunk-GEO6TNI5.js";import{a as v,f as ot}from"./chunk-TMEVGU2Q.js";var nt=ot(at());function lt(a,m){if(a&1&&(i(0,"option"),o(1),t()),a&2){let d=m.$implicit;s(),p(d)}}function rt(a,m){if(a&1&&(i(0,"option"),o(1),t()),a&2){let d=m.$implicit;s(),p(d)}}function ct(a,m){if(a&1&&(i(0,"option"),o(1),t()),a&2){let d=m.$implicit;s(),p(d)}}function st(a,m){if(a&1&&(i(0,"option"),o(1),t()),a&2){let d=m.$implicit;s(),p(d)}}function mt(a,m){if(a&1&&(i(0,"option"),o(1),t()),a&2){let d=m.$implicit;s(),p(d)}}function dt(a,m){if(a&1){let d=P();i(0,"tr")(1,"td"),o(2),t(),i(3,"td"),o(4),t(),i(5,"td"),o(6),t(),i(7,"td"),o(8),t(),i(9,"td"),o(10),t(),i(11,"td"),o(12),t(),i(13,"td"),o(14),t(),i(15,"td"),o(16),t(),i(17,"td")(18,"a",20),y("click",function(){let e=I(d).index,l=x(2);return k(l.navigateToCard(l.List_HTML,e))}),S(19,"img",21),t()()()}if(a&2){let d=m.$implicit,n=m.index,e=x(2);s(2),p(d),s(2),p(e.List_HTML.html_object[n]),s(2),p(e.List_HTML.object_station[n]),s(2),p(e.List_HTML.task_code[n]),s(2),p(e.List_HTML.station_code[n]),s(2),p(e.List_HTML.result[n]),s(2),p(e.List_HTML.created_at[n]),s(2),p(e.List_HTML.confidence_score[n])}}function pt(a,m){if(a&1&&(i(0,"div",18)(1,"h5"),o(2,"Search Results:"),t(),i(3,"table",19)(4,"thead")(5,"tr")(6,"th"),o(7,"Infra Type"),t(),i(8,"th"),o(9,"Infra Object"),t(),i(10,"th"),o(11,"Object Station Name"),t(),i(12,"th"),o(13,"Task"),t(),i(14,"th"),o(15,"Station Code"),t(),i(16,"th"),o(17,"Results"),t(),i(18,"th"),o(19,"Created At"),t(),i(20,"th"),o(21,"Reliability"),t(),i(22,"th"),o(23,"URLs"),t()()(),i(24,"tbody"),h(25,dt,20,8,"tr",6),t()()()),a&2){let d=x();s(25),g("ngForOf",d.List_HTML.html_type)}}var Rt=(()=>{let m=class m{constructor(n,e,l){this.http=n,this.router=e,this.dataService=l,this.APIURL=`${z.server}/`,this.List_HTML={html_type:[],html_object:[],object_station:[],request_id:[],task_ID:[],task_code:[],station_code:[],result:[],created_at:[],confidence_score:[],urls:[]},this.dataset={},this.transformedData=[],this.filteredData=[],this.options={"Lo\u1EA1i h\u1EA1 t\u1EA7ng m\u1EA1ng l\u01B0\u1EDBi":[""],"\u0110\u1ED1i t\u01B0\u1EE3ng h\u1EA1 t\u1EA7ng m\u1EA1ng l\u01B0\u1EDBi":[""],"\u0110\u1ED1i t\u01B0\u1EE3ng \u1EA3nh ch\u1EE5p":[""],"\u0110\u1EA7u vi\u1EC7c":[""],"M\xE3 tr\u1EA1m":[""]}}navigateToCard(n,e){let l={loaiHTML:n.html_type[e],doiTuongHTML:n.html_object[e],doiTuongAnh:n.object_station[e],mayeucau:n.request_id[e],dauViec:n.task_code[e],madauViec:n.task_ID[e],ketQua:n.result[e],doChinhXac:n.confidence_score[e],khoangThoiGian:n.created_at[e],imagePaths:n.urls[e]};this.dataService.listHTML=v({},this.List_HTML),this.router.navigate(["/cards"],{queryParams:l})}ngOnInit(){this.resetListHTML(),this.loadOptions(),this.loadData()}loadData(){this.dataService.listHTML.html_type.length>0&&(this.List_HTML=v({},this.dataService.listHTML))}loadOptions(){T([this.html_type(),this.html_object(),this.object_station(),this.task_code(),this.station_code()]).subscribe()}html_type(){return this.http.get(this.APIURL+"html_type").pipe(f(n=>{this.options["Lo\u1EA1i h\u1EA1 t\u1EA7ng m\u1EA1ng l\u01B0\u1EDBi"]=this.removeDuplicatesAndEmpty(n.data.map(e=>e.html_type))}))}html_object(){return this.http.get(this.APIURL+"html_object").pipe(f(n=>{this.options["\u0110\u1ED1i t\u01B0\u1EE3ng h\u1EA1 t\u1EA7ng m\u1EA1ng l\u01B0\u1EDBi"]=this.removeDuplicatesAndEmpty(n.data.map(e=>e.html_object))}))}object_station(){return this.http.get(this.APIURL+"object_station").pipe(f(n=>{this.options["\u0110\u1ED1i t\u01B0\u1EE3ng \u1EA3nh ch\u1EE5p"]=this.removeDuplicatesAndEmpty(n.data.map(e=>e.object_station_name))}))}task_code(){return this.http.get(this.APIURL+"task_code").pipe(f(n=>{this.options["\u0110\u1EA7u vi\u1EC7c"]=this.removeDuplicatesAndEmpty(n.data.map(e=>e.task_code))}))}station_code(){return this.http.get(this.APIURL+"station_code").pipe(f(n=>{this.options["M\xE3 tr\u1EA1m"]=this.removeDuplicatesAndEmpty(n.data.map(e=>e.station_code))}))}removeDuplicatesAndEmpty(n){return n.filter((e,l,_)=>e&&_.indexOf(e)===l)}resetListHTML(){this.List_HTML={html_type:[],html_object:[],object_station:[],request_id:[],task_ID:[],task_code:[],station_code:[],result:[],created_at:[],confidence_score:[],urls:[]}}exportReport(){let n=[["Infra Type","Infra Object","Object Station Name","Request ID","Task Name","Task ID","Station ID","Result","Time","Reliability"]],e=this.List_HTML.html_type.map((u,r)=>[this.List_HTML.html_type[r],this.List_HTML.html_object[r],this.List_HTML.object_station[r],this.List_HTML.request_id[r],this.List_HTML.task_code[r],this.List_HTML.task_ID[r],this.List_HTML.station_code[r],this.List_HTML.result[r],this.List_HTML.created_at[r],this.List_HTML.confidence_score[r]]),l=n.concat(e),_=C.aoa_to_sheet(l),L=C.book_new();C.book_append_sheet(L,_,"Report");let b=et(L,{bookType:"xlsx",type:"array"}),M=new Blob([b],{type:"application/octet-stream"});(0,nt.saveAs)(M,"report.xlsx")}onSubmit(n){n.preventDefault(),this.resetListHTML();let e=document.getElementById("inputField1").value,l=document.getElementById("inputField2").value,_=document.getElementById("inputField3").value,L=document.getElementById("inputField4").value,b=document.getElementById("inputField5").value,M=document.getElementById("inputField8").value,u=new FormData;u.append("html_type",e==="Lo\u1EA1i h\u1EA1 t\u1EA7ng m\u1EA1ng l\u01B0\u1EDBi"?"all":e||"isempty"),u.append("html_object",l==="\u0110\u1ED1i t\u01B0\u1EE3ng h\u1EA1 t\u1EA7ng m\u1EA1ng l\u01B0\u1EDBi"?"all":l||"isempty"),u.append("object_station",_==="\u0110\u1ED1i t\u01B0\u1EE3ng \u1EA3nh ch\u1EE5p"?"all":_||"isempty"),u.append("problem",L==="\u0110\u1EA7u vi\u1EC7c"?"all":L||"isempty"),u.append("station_code",b==="M\xE3 tr\u1EA1m"?"all":b||"isempty"),u.append("acc",M||"isempty"),this.query_all(u).subscribe(r=>{this.List_HTML.html_type=r.data.map(c=>c.html_type),this.List_HTML.html_object=r.data.map(c=>c.html_object),this.List_HTML.object_station=r.data.map(c=>c.object_station_name),this.List_HTML.request_id=r.data.map(c=>c.request_id),this.List_HTML.task_ID=r.data.map(c=>c.task_ID),this.List_HTML.task_code=r.data.map(c=>c.task_code),this.List_HTML.result=r.data.map(c=>c.result),this.List_HTML.station_code=r.data.map(c=>c.station_code),this.List_HTML.created_at=r.data.map(c=>c.created_at),this.List_HTML.confidence_score=r.data.map(c=>c.confidence_score),this.List_HTML.urls=r.data.map(c=>c.urls)})}query_all(n){return this.http.post(this.APIURL+"query_all",n)}};m.\u0275fac=function(e){return new(e||m)(E(w),E(R),E(it))},m.\u0275cmp=O({type:m,selectors:[["app-layout"]],standalone:!0,features:[F],decls:61,vars:6,consts:[["xs","12"],[1,"mb-4"],["cForm","",1,"row","g-3"],["md","3"],["cSelect","","id","inputField1"],["value","","disabled","","selected",""],[4,"ngFor","ngForOf"],["cSelect","","id","inputField2"],["cSelect","","id","inputField3"],["cSelect","","id","inputField4"],["md","2"],["cSelect","","id","inputField5"],["cSelect","","id","inputField6"],["cSelect","","id","inputField7"],["type","text","id","inputField8","placeholder","Reliability"],["md","6",1,"c-col-button"],["type","submit","cButton","","color","primary",3,"click"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"table"],[3,"click"],["src","assets/images/image_icon.png","alt","Click to view",2,"width","24px","height","24px"]],template:function(e,l){e&1&&(i(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header")(4,"strong"),o(5,"Look up Results"),t()(),i(6,"c-card-body")(7,"form",2)(8,"c-col",3)(9,"select",4)(10,"option",5),o(11,"Infra Type"),t(),h(12,lt,2,1,"option",6),t()(),i(13,"c-col",3)(14,"select",7)(15,"option",5),o(16,"Infra Object"),t(),h(17,rt,2,1,"option",6),t()(),i(18,"c-col",3)(19,"select",8)(20,"option",5),o(21,"Object Station Name"),t(),h(22,ct,2,1,"option",6),t()(),i(23,"c-col",3)(24,"select",9)(25,"option",5),o(26,"Task"),t(),h(27,st,2,1,"option",6),t()(),i(28,"c-col",10)(29,"select",11)(30,"option",5),o(31,"Station Code"),t(),h(32,mt,2,1,"option",6),t()(),i(33,"c-col",10)(34,"select",12)(35,"option",5),o(36,"Time Period "),t(),i(37,"option"),o(38,"1 month - now"),t(),i(39,"option"),o(40,"3 month - now"),t(),i(41,"option"),o(42,"6 month - now"),t(),i(43,"option"),o(44,"1 month - now"),t()()(),i(45,"c-col",10)(46,"select",13)(47,"option",5),o(48,"Results"),t(),i(49,"option"),o(50,"Good"),t(),i(51,"option"),o(52,"Fail"),t()()(),i(53,"c-col",10),S(54,"input",14),t(),i(55,"c-col",15)(56,"button",16),y("click",function(L){return l.onSubmit(L)}),o(57,"Export Report"),t(),i(58,"button",16),y("click",function(){return l.exportReport()}),o(59,"Export Excel"),t()()(),h(60,pt,26,1,"div",17),t()()()()),e&2&&(s(12),g("ngForOf",l.options["Lo\u1EA1i h\u1EA1 t\u1EA7ng m\u1EA1ng l\u01B0\u1EDBi"]),s(5),g("ngForOf",l.options["\u0110\u1ED1i t\u01B0\u1EE3ng h\u1EA1 t\u1EA7ng m\u1EA1ng l\u01B0\u1EDBi"]),s(5),g("ngForOf",l.options["\u0110\u1ED1i t\u01B0\u1EE3ng \u1EA3nh ch\u1EE5p"]),s(5),g("ngForOf",l.options["\u0110\u1EA7u vi\u1EC7c"]),s(5),g("ngForOf",l.options["M\xE3 tr\u1EA1m"]),s(28),g("ngIf",l.List_HTML.html_type.length>0))},dependencies:[G,V,N,X,q,tt,K,W,Y,J,Z,Q,U,$,B,j,D,H,A],styles:["form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.025rem}c-col[_ngcontent-%COMP%]{padding:.5rem}c-col.md-2[_ngcontent-%COMP%], c-col.md-3[_ngcontent-%COMP%]{max-width:25%}select[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{width:100%;padding:.375rem .75rem;border-radius:.25rem;border:1px solid #ced4da;background-color:#fff;font-size:1rem;color:#495057;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}select[_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus{border-color:red;outline:none;box-shadow:0 0 0 .2rem #4e73df40}button[cButton][_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:red;color:#fff;border:none;border-radius:.25rem;cursor:pointer;transition:background-color .3s ease}button[cButton][_ngcontent-%COMP%]:hover{background-color:red}button[cButton][_ngcontent-%COMP%]:not(:last-child){margin-right:.5rem}.c-col-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:.5rem}table[_ngcontent-%COMP%]{width:100%;margin-top:1.5rem;border-collapse:collapse}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;text-align:center;border:1px solid #ddd;vertical-align:middle}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f8f9fc}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px;cursor:pointer}@media (max-width: 768px){c-col[_ngcontent-%COMP%]{max-width:100%}button[cButton][_ngcontent-%COMP%]{width:100%}}"]});let a=m;return a})();export{Rt as LayoutComponent};
